// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  userID        Int     @id @map("_id") @db.Int
  Password      String  
  email         String  @unique
  Postal_code   String
  state         String  
  Address1      String  @default(" ")
  Address2      String  @default(" ")
  fname         String
  lname         String
  cart          Cart[]
  invoice       Invoice[]
}

model Product {
  ID   Int    @id @map("_id") @db.Int
  name        String
  description String
  price       Float
  stock       Int
  Image       String
  type        Type @relation(fields: [typeID], references: [typeID])
  typeID      Int @db.Int
  country     Country @relation(fields: [countryID], references: [countryID])
  countryID   Int @db.Int
  region      Region @relation(fields: [regionID], references: [regionID])
  regionID    Int @db.Int
  cartProd    CartProduct[]
}

model Type {
  typeID   Int @id @map("_id") @db.Int
  typeName String
  products Product[]
}

model Country {
  countryID   Int @id @map("_id") @db.Int
  countryName String
  products    Product[]
}
model Region {
  regionID   Int @id @map("_id") @db.Int
  regionName String
  products   Product[]
}

model Cart {
  cartID         Int @id @map("_id") @db.Int
  user           User @relation(fields: [userID], references: [userID])
  userID         Int @db.Int
  totalPrice     Float
  shipping       Float
  tax            Float
  subtotal       Float
  totalQuantity  Int
  cQr            CarttoQuantityRelation[]
  invoice        Invoice[]
 }

 model CarttoQuantityRelation {
  id              Int @id @map("_id") @db.Int
  cart            Cart @relation(fields: [cartID], references: [cartID])
  cartID          Int @db.Int
  cartquantity    cartQuantity @relation(fields: [cartQuantityID], references: [cartQuantityID])
  cartQuantityID  Int @db.Int
 }

model cartQuantity {
  cartQuantityID  Int @id @map("_id") @db.Int
  cartproduct     CartProduct @relation(fields: [cartProductID], references: [cartProductID])
  cartProductID   Int @db.Int
  quantity        Int
  quantityPrice   Float
  cQr             CarttoQuantityRelation[]
}

model CartProduct {
  cartProductID  Int @id @map("_id") @db.Int
  product        Product  @relation(fields: [productID], references: [ID])
  productID      Int @db.Int
  cartQ          cartQuantity[]
}

model Invoice {
  invoiceID    Int @id @map("_id") @db.Int
  purchaseDate String
  user         User @relation(fields: [userID], references: [userID])
  userID       Int  @db.Int
  cart         Cart @relation(fields: [cartID], references: [cartID])
  cartID       Int  @db.Int
  dateCreated  String
}

model Billing {
  billingID    Int @id @map("_id") @db.Int
  cardNumber   Int @unique
  expiration   String
  securityCode Int
}



